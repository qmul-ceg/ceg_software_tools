(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[603],{1615:()=>{},4582:()=>{},5028:(e,t,l)=>{Promise.resolve().then(l.bind(l,9216))},9216:(e,t,l)=>{"use strict";l.d(t,{default:()=>O});var i=l(9236),s=l(1032),a=l(8185),r=l(8581);function n(e){let{...t}=e;return(0,i.jsx)(a.bL,{"data-slot":"popover",...t})}function d(e){let{...t}=e;return(0,i.jsx)(a.l9,{"data-slot":"popover-trigger",...t})}function o(e){let{className:t,align:l="center",sideOffset:s=4,...n}=e;return(0,i.jsx)(a.ZL,{children:(0,i.jsx)(a.UC,{"data-slot":"popover-content",align:l,sideOffset:s,className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",t),...n})})}var c=l(2005),u=l.n(c),m=l(5295),x=l(5505);let h=e=>{var t;let{exportObject:l,data:s,reportKeys:a}=e,{importedData:r}=(0,x._)();return(null==(t=r.data)?void 0:t.masterReport)?(console.log(r),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("div",{className:"mr-2",children:(0,i.jsxs)(n,{children:[(0,i.jsxs)(d,{className:"flex justify-center items-center text-xs px-2 py-[0.3em]  rounded-lg font-semibold bg-gradient-to-r from-[#7B0E72] from-70% to-[#E6007E] text-white hover:cursor-pointer",children:["User guide & ",(0,i.jsx)("br",{}),"resources"]}),(0,i.jsx)(o,{className:"px-2 py-2 w-[14em] mr-28",children:(0,i.jsxs)("div",{className:" text-sm ",children:[(0,i.jsx)("div",{children:(0,i.jsx)("ul",{className:"ml-2 menu_list_items",children:(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"https://www.qmul.ac.uk/ceg/support-for-gp-practices/resources/software-tools/aftool/user-guidance/",target:"_blank",rel:"noopener noreferrer",children:"User guide"})})})}),(0,i.jsx)("div",{className:"w-full border mt-1 mb-1"}),(0,i.jsxs)("div",{children:[(0,i.jsx)("strong",{children:"Resources"}),(0,i.jsxs)("ul",{className:"ml-2 menu_list_items",children:[(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"https://www.qmul.ac.uk/ceg/",target:"_blank",rel:"noopener noreferrer",children:"CEG website"})}),(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"https://cks.nice.org.uk/topics/anticoagulation-oral/",target:"_blank",rel:"noopener noreferrer",children:"NICE CKS Anticoagulation"})}),(0,i.jsx)("li",{children:(0,i.jsx)("a",{href:"https://www.mdcalc.com/calc/43/creatinine-clearance-cockcroft-gault-equation",target:"_blank",rel:"noopener noreferrer",children:"Creatine clearance MDCALC"})})]})]})]})})]})}),(0,i.jsxs)("div",{className:"flex border border-[#21376A] rounded-lg ",children:[(0,i.jsx)("div",{className:"mr-1",children:(0,i.jsxs)(n,{children:[(0,i.jsx)(d,{className:"h-full cursor-pointer",children:(0,i.jsx)("div",{className:"text-center  px-6 py-2",children:(0,i.jsx)("p",{className:"text-md hover:text-black font-bold text-[#21376A]",children:"Export"})})}),(0,i.jsx)(o,{className:"px-2 py-2 w-[17em] ml-18 ",children:(0,i.jsxs)("div",{className:"text-sm",children:[(0,i.jsx)("strong",{className:"text-sm",children:"EXPORT SELECTED PATIENTS LIST"}),(0,i.jsxs)("ul",{className:" ml-2 menu_list_items ",children:[(0,i.jsxs)("li",{children:[(0,i.jsx)("button",{className:"cursor-pointer hover:opacity-70 font-medium",onClick:()=>{if(Object.keys(l).length>0){let e=Object.keys(l).map(e=>{let t=s.find(t=>t[a.Full_Name]===e);return{Name:t[a.Full_Name],Age:t[a.Age],Gender:t[a.Gender],"Patient reference":t[a.PatientReference],"CHA₂DS₂-VASc - Value":t[a.Statin_Name_Dosage_Quantity],"CHA₂DS₂-VASc - Date":t[a.Statin_Intensity],"ORBIT - Value":t[a.Statin_Exclusion],"ORBIT - Date":t[a.Inclisiran],"Anticoagulant issued (6m)":t[a.BloodPressure],"Aspirin / antiplatelet issued (6m)":t[a.CVD],NSAID:t[a.CKD3_5],HTN:t[a.Hypertension],Diabetes:t[a.Diabetes],"Total Cholestrol":t[a.Total_Cholestrol_Value],LDL:t[a.LDL_Cholestrol_Value],eGFR:t[a.EGFR_Value],"No. of anti-hptn Medication":t[a.AntiHptnMedicationCount],"Medication Review Date":t[a.MedsReviewDate]}}),t=new Date,i=m.Wp.json_to_sheet(e,{origin:"A4"});m.Wp.sheet_add_aoa(i,[["CEG CVD Prevention Tool"]],{origin:"A1"}),m.Wp.sheet_add_aoa(i,[["Patient Data Export",t,"".concat(t.getHours(),":").concat(t.getMinutes(),":").concat(t.getSeconds())]],{origin:"A2"});let r=m.Wp.book_new();m.Wp.book_append_sheet(r,i,"Patients"),m._h(r,"Patients.xlsx")}},children:"Excel list (.xlsx)"})," "]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("button",{className:"cursor-pointer hover:opacity-70 font-medium",children:"Accurx list (.csv)"})," "]}),(0,i.jsxs)("li",{children:[(0,i.jsx)("button",{className:"cursor-pointer hover:opacity-70 font-medium",children:" NHS No. list (.txt)"})," "]})]})]})})]})}),(0,i.jsx)("div",{className:"",children:(0,i.jsx)("div",{className:"border border-[#21376A] h-[80%] my-1"})}),(0,i.jsx)("div",{className:"ml-1 w-[70%]",children:(0,i.jsx)(u(),{href:"/",children:(0,i.jsx)("button",{className:"  flex flex-col  items-center px-4  py-1 hover:text-black group",children:(0,i.jsxs)("p",{className:"text-xs text-[#21376A]  group-hover:text-black font-bold",children:["Load new ",(0,i.jsx)("br",{}),"patient data"]})})})})]})]})):null},p=e=>{var t;let{exportObject:l,data:s,reportKeys:a}=e,{importedData:r}=(0,x._)();return(0,i.jsxs)("div",{className:"flex  ",children:[(0,i.jsx)("div",{className:" lg:w-[24%] max-w-[250px]",children:(0,i.jsx)("a",{href:"https://www.qmul.ac.uk",target:"_blank",rel:"noopener noreferrer",children:(0,i.jsx)("img",{src:"/icons/QMUL_Logo.png",alt:"QMUL logo"})})}),(0,i.jsxs)("div",{className:"text-center w-full  flex-row flex-1  ",children:[(0,i.jsx)("a",{href:"https://www.qmul.ac.uk/ceg/",target:"_blank",rel:"noopener noreferrer",className:" text-xl font-bold text-[#21376A] ",children:"Clinical Effectiveness Group"}),(0,i.jsx)("h1",{className:"text-3xl  font-bold text-[#21376A] ",children:null==r||null==(t=r.data)?void 0:t.toolName})]}),(0,i.jsx)("div",{children:(0,i.jsx)(h,{exportObject:l,data:s,reportKeys:a})})]})};var f=l(3961),v=l(8947),g=l(4431),b=l(9539),j=l(9234);function N(e){let{...t}=e;return(0,i.jsx)(g.bL,{"data-slot":"select",...t})}function _(e){let{className:t,size:l="default",children:s,...a}=e;return(0,i.jsxs)(g.l9,{"data-slot":"select-trigger","data-size":l,className:(0,r.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md  bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a,children:[s,(0,i.jsx)(g.In,{asChild:!0,children:(0,i.jsx)(b.A,{className:"size-4 opacity-50 text-white"})})]})}function y(e){let{className:t,children:l,position:s="popper",...a}=e;return(0,i.jsx)(g.ZL,{children:(0,i.jsxs)(g.UC,{"data-slot":"select-content",className:(0,r.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...a,children:[(0,i.jsx)(w,{}),(0,i.jsx)(g.LM,{className:(0,r.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:l}),(0,i.jsx)(D,{})]})})}function w(e){let{className:t,...l}=e;return(0,i.jsx)(g.PP,{"data-slot":"select-scroll-up-button",className:(0,r.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,i.jsx)(j.A,{className:"size-4"})})}function D(e){let{className:t,...l}=e;return(0,i.jsx)(g.wn,{"data-slot":"select-scroll-down-button",className:(0,r.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,i.jsx)(b.A,{className:"size-4"})})}var C=l(6470),k=l(6331),A=l(5814);let R=e=>{var t,l,a,r,n,d;let{filterStates:o,setFilterStates:c,activeFilters:u,setActiveFilters:m}=e,[h,p]=(0,s.useState)(!0),{importedData:g}=(0,x._)(),b={antihypertensiveMedsFilter:{kind:"grouped",value:[[],[],[],[]]},bloodPressureFilter:{kind:"grouped",value:[[],[]]},houseboundCarehomeFilter:{kind:"multi",value:[]},lipidMedicationsFilter:{kind:"grouped",value:[[],[],[],[]]},comorbiditiesFilter:{kind:"multi",value:[]},cholestrolFilter:{kind:"grouped",value:[[],[]]},qRiskFilter:{kind:"grouped",value:[[],[]]},vulnerabilitiesFilter:{kind:"multi",value:[]},ethnicityFilter:{kind:"multi",value:[]},ageFilter:{kind:"multi",value:[]},adverseMedsFilter:{kind:"multi",value:[]},hptnDiagnosis:{kind:"multi",value:[]},aceiArbFilter:{kind:"multi",value:[]}},[j,w]=(0,s.useState)({}),D=e=>{"multi"===e.selectedFilterKind&&(()=>{let t=e.selectedFilterName;c(l=>l[t].value.includes(e.selectedValue)?{...l,[t]:{kind:"multi",value:l[t].value.filter(t=>t!==e.selectedValue)}}:{...l,[t]:{kind:"multi",value:[...l[t].value,e.selectedValue]}})})(),"grouped"===e.selectedFilterKind&&(()=>{let t=e.selectedFilterName;c(l=>l[t].value[e.selectedIndex].includes(e.selectedValue)?{...l,[t]:{kind:"grouped",value:l[t].value.map((t,l)=>l===e.selectedIndex?t.filter(t=>t!==e.selectedValue):t)}}:{...l,[t]:{kind:"grouped",value:l[t].value.map((t,l)=>l===e.selectedIndex?[...t,e.selectedValue]:t)}})})()},R=e=>{let t=Object.entries(e).every(e=>{let[t,l]=e;return JSON.stringify(j[t])===JSON.stringify(l)});if(j&&t){c(b),w({});return}w(e),c(b),c({...b,...e})};(0,s.useEffect)(()=>{!function(e,t){let l=Object.keys(e),i=Object.keys(t);return l.length===i.length&&l.every(l=>e[l]===t[l])}(j,(()=>{let e={};return o&&Object.entries(o).map(t=>{let[l,i]=t;"multi"==i.kind&&i.value.length>0||"grouped"==i.kind&&i.value.some(e=>e.length>0)?(u.includes(l)||m(e=>[...e,l]),e[l]=i):u.includes(l)&&m(e=>e.filter(e=>e!==l))}),e})())&&w({})},[o]);let S=null!=(n=null==g||null==(t=g.config)?void 0:t.quickFilters)?n:[],F=null!=(d=null==g||null==(l=g.config)?void 0:l.filters)?d:[];return(0,i.jsxs)("div",{children:[(0,i.jsxs)("div",{className:" flex px-4 min-h-16 items-center  rounded-t-lg bg-[#21376A]",children:[(0,i.jsxs)("div",{className:" items-center flex",children:[(0,i.jsx)("p",{className:"text-xl font-bold text-white mr-4",children:"Filters"}),(0,i.jsx)("div",{className:"flex gap-2 flex-wrap  p-2",children:Object.entries(o).map(e=>{let[t,l]=e;return"multi"===l.kind&&l.value.length>0?(0,i.jsx)("div",{className:"  text-sm text-[#21376A] bg-white px-2 rounded-lg  ",children:(0,i.jsxs)("span",{className:"inline-flex gap-2 items-center justify-center font-bold",children:[C.E_.filters[t].label,": ",l.value.map(e=>(0,i.jsxs)("div",{className:"flex items-center",children:[C.E_.filters[t].options.map(t=>{if(e===t.value)return(0,i.jsx)("span",{className:"font-normal mr-2",children:t.label})}),(0,i.jsx)("button",{className:" cursor-pointer text-red-500 hover:opacity-90 text-sm hover:text-lg font-black",onClick:()=>D({selectedFilterName:t,selectedValue:e,selectedFilterKind:l.kind}),children:(0,i.jsx)(k.EIA,{className:"font-bold"})}),l.value.indexOf(e)<l.value.length-1?(0,i.jsx)(A.dnm,{className:" ml-2 text-gray-500"}):""]}))]})}):"grouped"===l.kind&&l.value.some(e=>e.length>0)?(0,i.jsx)("div",{className:" border text-sm text-[#21376A] bg-white px-2 rounded-lg  ",children:(0,i.jsxs)("span",{className:"inline-flex gap-2 items-center justify-center font-bold",children:[C.E_.filters[t].label," :",l.value.map((e,s)=>{if(e.length>0)return(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[e.map(a=>(0,i.jsxs)("div",{className:"flex items-center",children:[Object.entries(C.E_.filters[t].options).map(e=>{let[t,l]=e;return(0,i.jsx)("div",{className:"flex",children:l.groupOptions.map(e=>{if(a===e.value)return(0,i.jsx)("span",{className:"font-normal mr-1",children:e.label})})})}),(0,i.jsx)("button",{className:" cursor-pointer text-red-500 hover:opacity-90 text-xs hover:text-sm",onClick:()=>D({selectedFilterName:t,selectedValue:a,selectedFilterKind:l.kind,selectedIndex:s}),children:(0,i.jsx)(k.EIA,{})}),e.indexOf(a)<e.length-1?(0,i.jsx)(A.dnm,{className:" ml-2 text-gray-500 "}):""]})),s<l.value.length-1?(0,i.jsx)("span",{className:"text-gray-300",children:"|"}):""]})})]})}):void 0})})]}),(0,i.jsx)("div",{className:"ml-auto mr-8 text-center min-w-[140px] ",children:(0,i.jsx)("button",{className:"bg-white text-[#21376A] rounded-md  font-bold text-sm px-2 py-1 cursor-pointer  hover:text-black hover:bg-white",onClick:()=>void(w({}),c(b)),children:"Remove all filters"})}),(0,i.jsx)("div",{className:"icon ".concat(h?"open":"closed"),children:(0,i.jsx)(f.g,{icon:v.w2A,className:"text-white cursor-pointer opacity-80",onClick:()=>p(!h)})})]}),(0,i.jsxs)("div",{className:"border-[0.1em] border-[#21376A] border-t-0 filter ".concat(h?"open":"closed"," px-4 py-2 flex justify-between"),children:[(0,i.jsxs)("div",{className:" min-w-[400px] ",children:[(0,i.jsx)("header",{className:"flex justify-between px-2 py-2 rounded-t-lg bg-gradient-to-r from-[#7B0E72] from-70% to-[#E6007E] text-white",children:(0,i.jsx)("p",{className:"font-semibold text-md text-left ",children:"Quick filters"})}),(0,i.jsx)("div",{className:"flex flex-col border-[0.1em] text-left border-[#21376A]  border-t-0 p-2 font-semibold ",children:Object.entries(S).map(e=>{let[t,l]=e;return(0,i.jsx)("ul",{children:(0,i.jsx)("li",{children:(0,i.jsxs)("label",{htmlFor:"",className:"cursor-pointer hover:opacity-80",children:[(0,i.jsx)("input",{className:"mr-2 cursor-pointer hover:opacity-90",type:"checkbox",checked:JSON.stringify(j)===JSON.stringify(l.payload),onChange:()=>R(l.payload)}),l.label]})})})})})]}),(0,i.jsx)("div",{className:" border-black border-dotted w-[800px] grid grid-rows-3 grid-flow-col h-50 justify-between",children:Object.entries(F).map(e=>{let[t,l]=e;return(0,i.jsx)("div",{style:{width:"".concat(l.ui.width,"em")},children:(0,i.jsxs)(N,{children:[(0,i.jsx)(_,{className:"cursor-pointer w-full hover:opacity-95",style:{backgroundColor:l.ui.bgColour,color:"white",fontWeight:"bold"},children:l.label}),(0,i.jsx)(y,{className:"px-2",children:"multi"===l.kind?l.options.map(e=>{if("noHypertension"!==e.value)return(0,i.jsx)("ul",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",className:" cursor-pointer mr-2",checked:"multi"===l.kind&&o[l.id].value.includes(e.value),value:e.value,onChange:()=>D({selectedFilterName:l.id,selectedValue:e.value,selectedFilterKind:l.kind})}),e.label]},e.value)})}):Object.entries(l.options).map((e,t,s)=>{let[a,r]=e;return(0,i.jsxs)("div",{children:[(0,i.jsx)("p",{className:"font-bold",children:r.groupName}),(0,i.jsx)("ul",{className:"".concat(t!==s.length-1?" border-b-2":""," py-1"),children:r.groupOptions.map(e=>{if("no_acei/arb"!==e.value)return(0,i.jsx)("li",{children:(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"checkbox",className:"cursor-pointer mr-2 ",value:e.value,checked:"grouped"===l.kind&&o[l.id].value[t].includes(e.value),onChange:()=>D({selectedFilterName:l.id,selectedValue:e.value,selectedFilterKind:l.kind,selectedIndex:t})}),e.label]})})})})]})})})]},t)})})}),(0,i.jsxs)("div",{className:"max-w-[650px] w-[600px] ml-0",children:[(0,i.jsxs)("header",{className:"flex  rounded-t-lg px-2 py-2 bg-[#21376A] text-white justify-between",children:[(0,i.jsx)("p",{className:"font-semibold text-md text-left ",children:"Summary"}),(0,i.jsxs)("div",{className:"flex gap-6 text-sm font-bold  mr-14",children:[(0,i.jsx)("p",{children:"Denominator"}),(0,i.jsx)("p",{children:"Numerator"}),(0,i.jsx)("p",{children:"%"})]})]}),(0,i.jsx)("div",{className:"border-[0.1em] border-[#21376A] border-t-0  p-2 font-semibold ",children:null==g||null==(r=g.data)||null==(a=r.summaryTable)?void 0:a.map((e,t)=>(0,i.jsxs)("div",{className:"text-sm flex  justify-between",children:[(0,i.jsx)("p",{children:e[0]}),(0,i.jsx)("div",{className:"flex gap-16 mr-12",children:e.map((e,t)=>t?(0,i.jsx)("p",{children:e}):"")})]},t))})]})]})]})},S=()=>(0,i.jsxs)("div",{className:" w-full mx-auto px-2 flex gap-2   mb-2 justify-between items-center  lg:text-xs xl:text-sm  ",children:[(0,i.jsx)("div",{className:"flex mx-auto ",children:(0,i.jsx)("p",{className:"font-semibold",children:"\xa9 Clinical Effectiveness Group (CEG), Queen Mary University of London. All rights reserved. "})}),(0,i.jsx)("div",{children:"v.0.1.100"})]});var F=l(7507);function T(e){let{setIsModalOpen:t,selectedPatientIndex:l,setSelectedPatientIndex:s,filteredData:a,reportKeys:r,toggleSelectedPatient:n,selectedForExport:d}=e,o=e=>{let t=0;l&&("next"===e?t=(l+1)%a.length:"previous"===e&&(t=0===l?a.length-1:l-1)),s(t)},c={medicationTable:{tableHeaders:["Medication","Medication name","Date recorded"],tableData:[{info:"ACEi/ARB (6m)",description:null==r?void 0:r.ACEi_ARB_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.ACEi_ARB_Issue_Date},{info:"Beta-blocker (6m)",description:null==r?void 0:r.Beta_Blocker_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.Beta_Blocker_Issue_Date},{info:"Calcium Channel Blockers (CCB)(6m)",description:null==r?void 0:r.Ca_Channel_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.Beta_Blocker_Issue_Date},{info:"Thiazide(-like) diuretic (6m)	",description:null==r?void 0:r.Thiazides_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.Thiazides_Issue_Date},{info:"Other (e.g. centrally-acting, loop diuretic)(6m)",description:null==r?void 0:r.Other_Diuretic_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.Other_Diuretic_Name_Issue_Date}]},lipidsMedicationTable:{tableHeaders:["Lipids medication","Medication name","Date recorded"],tableData:[{info:"Statin any/high intensity (6m)",description:null==r?void 0:r.Statin_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.Statin_Issue_Date},{info:"Ezetimbe (6m)",description:null==r?void 0:r.Ezetimbe_Issue_Date,dateRecorded:null==r?void 0:r.Ezetimbe_Issue_Date},{info:"Bempedoic (6m)",description:null==r?void 0:r.Bempedoic_Acid_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.Bempedoic_Acid_Name_Issue_Date},{info:"PCSK9 (incl. Inclisiran) (6m)",description:null==r?void 0:r.PCSK9_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.PCSK9_Issue_Date}]},statinExclusion:{tableHeaders:["Statin exclusion","Description","Date recorded"],tableData:[{info:"Contraindicated (latest ever)",description:null==r?void 0:r.Statin_Contra_Code_Term,dateRecorded:null==r?void 0:r.Statin_Contra_Date},{info:"Patient declined (latest ever)",description:null==r?void 0:r.Statin_Decline_Code_Term,dateRecorded:null==r?void 0:r.Statin_Decline_Date}]},adverseMeds:{tableHeaders:["AdverseMeds","Description","Date recorded"],tableData:[{info:"NSAIDs (excl. aspirin) (6m)",description:null==r?void 0:r.NSAID_Name_Dosage_Quantity,dateRecorded:null==r?void 0:r.NSAID_Issue_Date}]},clinicalData:{tableHeaders:["Clinical data","Description","Date recorded"],tableData:[{info:"Total cholestrol (latest ever)",value:null==r?void 0:r.Total_Cholestrol_Value,dateRecorded:null==r?void 0:r.Total_Cholestrol_Date},{info:"HDL cholestrol (latest ever)",value:null==r?void 0:r.HDL_Cholestrol_Value,dateRecorded:null==r?void 0:r.HDL_Cholestrol_Date},{info:"LDL cholestrol (latest ever)",value:null==r?void 0:r.LDL_Cholestrol_Value,dateRecorded:null==r?void 0:r.LDL_Cholestrol_Date},{info:"non-HDL cholestrol (latest ever)",value:null==r?void 0:r.Non_HDL_Cholestrol_Value,dateRecorded:null==r?void 0:r.Non_HDL_Cholestrol_Date},{info:"Ratio total cholestrol/HDL (latest ever)",value:"",dateRecorded:""},{info:"Triglycerides (latest ever)",value:null==r?void 0:r.Triglyceride_Value,dateRecorded:null==r?void 0:r.Triglyceride_Date},{info:"eGFR (latest ever)",value:null==r?void 0:r.EGFR_Value,dateRecorded:null==r?void 0:r.EGFR_Date},{info:"Serum creatinine (latest ever)",value:null==r?void 0:r.Serum_Creatinine_Value,dateRecorded:null==r?void 0:r.Serum_Creatinine_Date},{info:"Urine ACR (latest ever)",value:null==r?void 0:r.ACR_Value,dateRecorded:null==r?void 0:r.ACR_Date},{info:"Serum ALT or AST (latest ever)",value:null==r?void 0:r.ALT_Value,dateRecorded:null==r?void 0:r.ALT_Date},{info:"Pulse check (latest ever)",value:"",dateRecorded:""}]},comorbidities:{tableHeaders:["Co-morbidities","Description","Date recorded"],tableData:[{info:"CVD (IHD/Strike/TIA/PAD)",description:null==r?void 0:r.CVD,dateRecorded:""},{info:"Hypertension",description:null==r?void 0:r.Hypertension_Code_Term,dateRecorded:""},{info:"Heart Failure",description:null==r?void 0:r.Heart_Failure_Code_Term,dateRecorded:""},{info:"Diabetes (T1/T2)",description:null==r?void 0:r.Diabetes_Code_Term,dateRecorded:""},{info:"AF",description:null==r?void 0:r.AF_Code_Term,dateRecorded:""},{info:"CKD 3-5",description:null==r?void 0:r.CKD_Code_Term,dateRecorded:""},{info:"Rheumatoid Arthritis or Lupus",description:null==r?void 0:r.RA_SLE_Code_Term,dateRecorded:""}]},vulnerabilities:{tableHeaders:["Vulnerabilities","Description","Date recorded"],tableData:[{info:"SMI",description:null==r?void 0:r.SMI_Code_Term,dateRecorded:""},{info:"Frailty score",description:null==r?void 0:r.Frailty_Score_Code_Term,dateRecorded:null==r?void 0:r.Frailty_Score_Date},{info:"Housebound",description:null==r?void 0:r.HouseB_CareH_Code_Term,dateRecorded:""},{info:"Learning disability",description:null==r?void 0:r.Learning_Difficulties_Code_Term,dateRecorded:""},{info:"Palliative care",description:null==r?void 0:r.Palliative_Care_Code_Term,dateRecorded:""},{info:"Dementia",description:null==r?void 0:r.Dementia_Code_Term,dateRecorded:""},{info:"Cancer",description:null==r?void 0:r.Cancer_Code_Term,dateRecorded:""}]},socialFactors:{tableHeaders:["Social factors","Description","Date recorded"],tableData:[{info:"Alcohol consumption (latest ever)",description:null==r?void 0:r.Alcohol_Value,dateRecorded:null==r?void 0:r.Alcohol_Date},{info:"Smoking (latest ever)",description:null==r?void 0:r.Smoking_Code_Term,dateRecorded:""}]}},u=a[l];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:" cursor-pointer fixed top-0 left-0 w-full h-full bg-black/90 z-40",onClick:()=>t(!1)}),(0,i.jsxs)("div",{className:" z-100 bg-white fixed  rounded-t-xl top-30 left-1/2 tranform -translate-x-1/2 w-[50%]  max-w-[1000px] ",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center  w-full h-12 px-4 rounded-t-lg bg-[#21376A] text-white ",children:[(0,i.jsx)("strong",{children:"Patient information"}),(0,i.jsx)(F.iCo,{className:"cursor-pointer ",onClick:()=>t(!1)})]}),(0,i.jsxs)("div",{className:" bg-white flex justify-center gap-6 p-2 ",children:[(0,i.jsxs)("button",{className:"cursor-pointer  flex flex-col  hover:font-medium",children:[(0,i.jsx)("span",{onClick:()=>o("previous"),children:"Previous patient"}),(0,i.jsx)(k.qRI,{className:" m-auto text-gray-500"})]}),(0,i.jsxs)("button",{className:"cursor-pointer  flex flex-col  hover:font-medium",children:[(0,i.jsx)("span",{onClick:()=>o("next"),children:"Next patient"}),(0,i.jsx)(k.t9q,{className:" m-auto text-gray-500"})]})]}),(0,i.jsxs)("div",{className:" text-xs px-2 flex bg-white py-4",children:[(0,i.jsx)("div",{className:" w-[50%]",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2   text-left",children:[(0,i.jsxs)("div",{className:"flex ",children:[(0,i.jsx)("h2",{className:" w-[30%] text-white pl-2 bg-[#21376A] font-semibold py-1 rounded-l-lg",children:"Full name"}),(0,i.jsx)("div",{className:"border border-gray-400 w-[65%] rounded-r-lg pl-2 py-1",children:a[l][r.Full_Name]})]}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("h2",{className:" w-[30%] text-white pl-2 bg-[#21376A] font-semibold py-1 rounded-l-lg",children:"Date of birth"}),(0,i.jsx)("div",{className:"border border-gray-400 w-[65%] rounded-r-lg pl-2 py-1",children:a[l][r.Date_Of_Birth]})]}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("h2",{className:" w-[30%] text-white pl-2 bg-[#21376A] font-semibold py-1 rounded-l-lg",children:"NHS number"}),(0,i.jsx)("div",{className:"border border-gray-400 w-[65%] rounded-r-lg pl-2 py-1"})]}),(0,i.jsxs)("div",{className:"flex h-14",children:[(0,i.jsx)("h2",{className:" w-[30%] text-white pl-2 bg-[#21376A] font-semibold py-1 rounded-l-lg",children:"Ethnicity"}),(0,i.jsx)("div",{className:"border border-gray-400 w-[65%] rounded-r-lg pl-2 py-1 ",children:a[l][r.Ethnicity]})]})]})}),(0,i.jsx)("div",{className:" w-[50%]",children:(0,i.jsxs)("div",{className:"flex flex-col gap-2  text-left",children:[(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("h2",{className:"w-[36%] text-white pl-2 bg-[#21376A] font-semibold py-1 rounded-l-lg whitespace-nowrap",children:"Patient record #"}),(0,i.jsx)("div",{className:"border border-gray-400 w-[65%] rounded-r-lg pl-2 py-1",children:"?????"})]}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("h2",{className:"w-[36%] text-white pl-2 bg-[#21376A] font-semibold py-1 rounded-l-lg",children:"Gender"}),(0,i.jsx)("div",{className:"border border-gray-400 w-[65%] rounded-r-lg pl-2 py-1",children:a[l][r.Gender]})]}),(0,i.jsxs)("div",{className:"flex",children:[(0,i.jsx)("h2",{className:"w-[36%] text-white pl-2 bg-[#21376A] font-semibold py-1 rounded-l-lg",children:"Age"}),(0,i.jsx)("div",{className:"border border-gray-400 w-[65%] rounded-r-lg pl-2 py-1",children:a[l][r.Age]})]}),(0,i.jsxs)("div",{className:"flex h-6",children:[(0,i.jsx)("h2",{className:"w-[36%] text-white pl-2 bg-[#21376A] font-semibold py-1 rounded-l-lg",children:"Mobile telephone"}),(0,i.jsx)("div",{className:"border border-gray-400 w-[65%]  rounded-r-lg pl-2 py-1",children:a[l][r.Mobile_Number]})]}),(0,i.jsx)("div",{className:"text-left text-sm ml-1",children:(0,i.jsxs)("label",{className:" inline-flex gap-2 items-center cursor-pointer font-bold",htmlFor:"modalCheckBox",children:["Select for export",(0,i.jsx)("input",{type:"checkbox",id:"modalCheckBox",checked:u[r.Full_Name]in d,onChange:()=>n(l),className:"ml-2 modal_checkbox"}),(0,i.jsx)("div",{className:"custom_modal_checkbox "})]})})]})})]}),(0,i.jsxs)("div",{className:"  my-4  px-2 text-sm max-h-[50vh] border overflow-auto bg-white",children:[(0,i.jsxs)("table",{className:" w-full",children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{className:" flex p-2 text-white bg-[#21376A] rounded-t-lg",children:[(0,i.jsxs)("div",{className:"flex gap-20",children:[(0,i.jsx)("th",{className:" ",children:"Systolic BP value (mmHg)"}),(0,i.jsx)("th",{className:" ",children:"Date recorded (last 3y)"})]}),(0,i.jsx)("th",{className:" "})]})}),(0,i.jsx)("tbody",{className:"",children:(0,i.jsx)("div",{className:"border h-50 "})})]}),Object.entries(c).map(e=>{let[t,s]=e;return Object.entries(s).map(e=>{let[t,s]=e;return(0,i.jsx)("table",{className:"w-full text-left mt-4 pt-4",children:"tableHeaders"===t?(0,i.jsx)("thead",{className:"border ",children:(0,i.jsxs)("tr",{className:"flex p-2 text-white bg-[#21376A] rounded-t-lg",children:[(0,i.jsx)("th",{className:"w-[45%] ",children:s[0]}),(0,i.jsx)("th",{className:"w-[40%] ",children:s[1]}),(0,i.jsx)("th",{children:s[2]})]})}):(0,i.jsx)("tbody",{children:s.map(e=>(0,i.jsxs)("tr",{className:"border",children:[(0,i.jsx)("td",{className:"",children:e.info}),(0,i.jsx)("td",{children:a[l][e.description]}),(0,i.jsx)("td",{children:a[l][e.dateRecorded]})]}))})})})})]})]})]})}let E=e=>{var t,l;let{handleToggleSelectAll:s,gridTemplateColumns:a,filteredData:r,selectedForExport:n}=e,{importedData:d}=(0,x._)();return(0,i.jsx)("div",{className:" border-b-6 border-[#21376A] rounded-t-lg pr-[11px]",children:(0,i.jsx)("div",{className:"flex",style:{display:"grid",gridTemplateColumns:a},children:null==d||null==(l=d.config)||null==(t=l.tableConfig)?void 0:t.map((e,t)=>"select"==e.id?(0,i.jsxs)("div",{className:"border-r-1 border-[#21376A] flex justify-center",children:[(0,i.jsx)("input",{type:"checkbox",checked:Object.keys(n).length===r.length,onChange:s})," "]}):(0,i.jsx)("div",{className:"text-center font-bold flex text-sm  px-2 py-1 items-center justify-".concat(e.align," ").concat("Medication review latest date"!==e.header?"border-r-1 ":"","   border-[#21376A]"),children:e.header},t))})})};var I=l(4600);let L=s.memo(e=>{let{row:t,tableConfig:l,reportKeys:s,selectedForExport:a,toggleSelectedPatient:r,handlePatientClick:n,index:d,style:o,gridTemplateColumns:c}=e;return(0,i.jsx)("div",{style:{...o,display:"grid",gridTemplateColumns:c},className:"hover:bg-gray-50",children:l.map((e,l)=>"select"===e.id?(0,i.jsx)("div",{className:" border-gray-100 border-b text-center border-r flex items-center justify-center",children:(0,i.jsx)("input",{type:"checkbox",onChange:()=>r(d),checked:t[s.Full_Name]in a})}):(0,i.jsx)("div",{className:"w-[".concat(e.width,"] flex justify-").concat(e.align," items-center border-gray-100 border-b border-r px-2 py-1 text-sm text-").concat(e.align," ").concat(e.id===s.Full_Name?"cursor-pointer text-[#21376A]":void 0),onClick:e.id===s.Full_Name?()=>n(d):void 0,children:t[e.id]}))})}),O=()=>{let{importedData:e}=(0,x._)();if(!e.data||!e.config||!e.data.reportRunDate||!e.config.filterFunctionalityConfig)return null;let t=(0,s.useRef)(null),l=e.config.reportKeys,a=e.config.filterFunctionalityConfig,r=e.data.reportRunDate,n=e.data.masterReport,d=e.config.filterStatesConfig,o=e.config.tableConfig,[c,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(),[f,v]=(0,s.useState)(()=>structuredClone(d)),[g,b]=(0,s.useState)([]),j=function(e){return(0,s.useMemo)(()=>Object.values(e.masterReport).filter(t=>e.activeFilters.every(l=>!0===e.filterFunctionalities[l](t,e.filterStates,e.reportKeys,e.relativeRunDate))),[e.filterStates,e.activeFilters])}({masterReport:n,activeFilters:g,filterStates:f,reportKeys:l,relativeRunDate:r,filterFunctionalities:a}),N=o.map(e=>e.width).join(" "),{toggleSelectedPatient:_,selectedForExport:y,handleToggleSelectAll:w}=function(e){let[t,l]=(0,s.useState)({});return(0,s.useEffect)(()=>{let t={};e.filteredData.forEach(l=>{t[l[e.key]]=!0}),l(t)},[e.filteredData]),{toggleSelectedPatient:t=>{let i=e.filteredData[t];l(t=>{if(!(i[e.key]in t))return{...t,[i[e.key]]:!0};{let l={...t};return delete l[i[e.key]],l}})},selectedForExport:t,setSelectedForExport:l,handleToggleSelectAll:()=>{if(Object.keys(t).length!==e.filteredData.length){let t={};e.filteredData.forEach(l=>{t[l[e.key]]=!0}),l(t)}else l({})}}}({filteredData:j,key:l.Full_Name}),D=(0,s.useCallback)(e=>{h(e),u(!0)},[]);return(0,i.jsxs)("div",{className:"flex flex-col  h-screen w-full overflow-hidden",children:[(0,i.jsx)("div",{className:"mt-2",children:(0,i.jsx)(p,{exportObject:y,data:j,reportKeys:l})}),(0,i.jsx)("div",{className:"mt-4",children:(0,i.jsx)(R,{filterStates:f,setFilterStates:v,activeFilters:g,setActiveFilters:b})}),(0,i.jsxs)("div",{className:"  mt-4 mb-2 flex justify-between",children:[(0,i.jsxs)("span",{className:"font-bold",children:["Patient count : ",j.length]}),(0,i.jsxs)("span",{className:"font-bold",children:["Relative run date : ",e.data.reportRunDate]})]}),(0,i.jsxs)("div",{className:"flex flex-col flex-1 min-h-0 border border-[#21376A] rounded-t-lg ",children:[(0,i.jsx)(E,{handleToggleSelectAll:w,selectedForExport:y,filteredData:j,gridTemplateColumns:N}),(0,i.jsx)("div",{className:"overflow-y-auto scroll-mt-20 ",ref:t,children:(0,i.jsx)(I.B8,{style:{height:"100%",width:"100%"},rowCount:j.length,rowHeight:30,rowComponent:function(e){let{index:t,style:l,tableConfig:s,reportKeys:a,selectedForExport:r}=e;return(0,i.jsx)(L,{row:j[t],tableConfig:s,reportKeys:a,selectedForExport:r,toggleSelectedPatient:_,handlePatientClick:D,index:t,style:l,gridTemplateColumns:N},t)},rowProps:{tableConfig:o,reportKeys:l,selectedForExport:y}})})]}),(0,i.jsx)("div",{className:"mt-auto",children:(0,i.jsx)(S,{})}),c?(0,i.jsx)(T,{setIsModalOpen:u,selectedPatientIndex:m,setSelectedPatientIndex:h,filteredData:j,reportKeys:l,toggleSelectedPatient:_,selectedForExport:y}):null]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[237,97,360,256,178,545,963,202,353,511,358],()=>t(5028)),_N_E=e.O()}]);